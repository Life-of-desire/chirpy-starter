---
title: 安卓开发四大组件
date: 2024-12-23 18:10:00 +0800
categories: []
tags: [安卓开发]
pin: false
---

## onCreate方法

• 在活动首次创建时调用，一般用于进行视图初始化、数据绑定等常规静态设置操作。
• 可通过Bundle参数获取此前保存的活动状态（如果有）。
示例（添加了一点注释说明）：


```java

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // 设置布局文件
    setContentView(R.layout.activity_main);

    // 从布局文件中获取按钮并设置点击事件
    Button button = findViewById(R.id.button);
    button.setOnClickListener(v -> {
        // 使用Intent启动另一个Activity，并请求返回数据
        Intent intent = new Intent(MainActivity.this, Test01.class);
        startActivityForResult(intent, 1);
    });
}
```

## onActivityResult方法

• 当被启动的活动返回时调用，用于接收返回结果并进行处理。
• 需要通过requestCode和resultCode等来区分不同活动的返回。
示例（添加了数据判空判断与逻辑说明）：

```java
@Override
protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == REQUEST_CODE && resultCode == RESULT_OK && data != null) {
        // 从Intent中获取数据
        String result = data.getStringExtra("time");
        
        // 更新UI——例如将数据展示到TextView上
        TextView textView = findViewById(R.id.text1);
        textView.setText(result);
    }
}
```

向上一个Activity返回数据
• 在新的Activity处理完数据后，可通过setResult方法将数据返回给启动它的Activity。
• 必须调用finish()以结束当前Activity并触发onActivityResult。
示例：

```java
Intent intent = new Intent();
// 存入需要传回的字符串数据
intent.putExtra("time", "123");
// 设置返回码与Intent
setResult(RESULT_OK, intent);
// 结束当前Activity
finish();
```

